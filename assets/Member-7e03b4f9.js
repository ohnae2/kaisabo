import{d as x,b as T,r as h,x as C,o as g,e as y,f as e,w as n,v as u,J as q,B as S,K as k,l as w,h as c,H as R,i as L,L as Y,p as H,j as N,_ as V}from"./index-b96c7cd4.js";import{G as A,S as K,a as B}from"./SelectGroupDate-2b14e51a.js";import{j as f}from"./jsonApi-4e63100b.js";import{f as b}from"./formApi-09baa514.js";import"./index-3df2611e.js";import"./util.date-6e182eaa.js";class U{async getMemberList(r){return(await f("/bo/mb/getMemberList",r||{})).data}async getMember(r){return(await f("/bo/mb/getMember",r||{})).data}async setMemberList(r){return(await f("/bo/mb/setMemberList",r||{})).data}async insertMember(r){return(await b("/bo/mb/insertMember",r)).data}async updateMember(r){return(await b("/bo/mb/updateMember",r)).data}async deleteMember(r){return(await b("/bo/mb/getMemberList",r)).data}}const _=new U,s=l=>(H("data-v-55a227db"),l=l(),N(),l),E={id:"member"},G=["onSubmit","onKeyup"],P=s(()=>e("legend",null,"검색",-1)),z=s(()=>e("colgroup",null,[e("col",{width:"80"}),e("col",{width:"30%"}),e("col",{width:"80"}),e("col",{width:"*"})],-1)),F=s(()=>e("th",null,"검색조건",-1)),J={colspan:"3"},O={key:0},W=s(()=>e("th",null,"업체ID",-1)),X={colspan:"3"},$={class:"audit"},j=s(()=>e("th",null,"수정기간",-1)),Q={colspan:"3"},Z=s(()=>e("th",null,"등록일",-1)),ee={colspan:"3"},te=s(()=>e("th",null,"수정ID",-1)),ae=s(()=>e("th",null,"등록ID",-1)),de={class:"btnWrap"},ie=s(()=>e("span",{class:"icon"},"",-1)),re=s(()=>e("span",{class:"icon"},"",-1)),oe=s(()=>e("span",{class:"icon"},"",-1)),se=s(()=>e("button",{type:"submit",class:"button3"},[e("span",{class:"icon"},"")],-1)),le=s(()=>e("span",{class:"icon"},'"',-1)),ne=[le],ue={class:"totalCount"},me=s(()=>e("div",{id:"grid"},null,-1)),ce=x({__name:"Member",setup(l){const r=T(),d=h({keyword:"",startModDt:"",endModDt:"",regDt:"",regId:"",modId:"",cmpId:""}),o=h({grid:{},required:["mbrId","lv","pwd","nic","nm","hpNo","postNo","addr","dtlAddr","bisitCnt","loginDt","pwdRfsDt","mbrStatCd","email","lckYn","flCnt"],totalCount:0,list:[],audit:!1}),m=function(){_.getMemberList(d).then(i=>{o.totalCount=i.count?i.count:0,o.list=i.data,o.grid.resetData(i.data,{})},i=>{console.log(i)})},v=function(){o.grid.appendRow({},{at:0})},M=function(){let i=o.grid.getFocusedCell();if(i.rowKey==null||i.rowKey==null){alert("행을 먼저 선택해주세요.");return}confirm("선택한 행을 정말 삭제하시겠습니까?")&&o.grid.removeRow(i.rowKey)},D=function(){location.reload()},p=function(i){for(let t in i)for(let a of o.required)if(t==a&&!i[t])return alert(t+" 필수값이 없습니다."),!1;return!0},I=function(){o.grid.blur();let i=[],t=[0,0,0];for(let a of o.grid.getModifiedRows().createdRows){if(a.crud="C",!p(a))return;i.push(a),t[0]++}for(let a of o.grid.getModifiedRows().updatedRows){if(a.crud="U",!p(a))return;i.push(a),t[1]++}for(let a of o.grid.getModifiedRows().deletedRows)a.crud="D",i.push(a),t[2]++;if(t[0]==0&&t[1]==0&&t[2]==0){alert("변경사항이 없습니다.");return}confirm("등록 "+t[0]+"건, 수정 "+t[1]+"건, 삭제 "+t[2]+"건을 정말 저장하시겠습니까?")&&_.setMemberList(i).then(a=>{location.reload()},a=>{console.log(a)})};return C(()=>{o.grid=new A({el:document.getElementById("grid"),columns:[{header:"회원ID",name:"mbrId",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:"text"},{header:"업체ID",name:"cmpId",sortable:!0,width:100,align:"left",disabled:r.userInfo.cmpId!="kaisa",editor:"text"},{header:"레벨",name:"lv",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!1},editor:"text"},{header:"비밀번호",name:"pwd",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:"text"},{header:"닉네임",name:"nic",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:"text"},{header:"파일번호",name:"fileNo",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!0},editor:"text"},{header:"이름",name:"nm",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:"text"},{header:"휴대전화번호",name:"hpNo",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:"text"},{header:"우편번호",name:"postNo",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:"text"},{header:"주소",name:"addr",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:"text"},{header:"상세주소",name:"dtlAddr",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:"text"},{header:"방문횟수",name:"bisitCnt",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!1},editor:"text"},{header:"로그인일시",name:"loginDt",sortable:!0,width:120,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:{type:"datePicker",options:{format:"yyyy-MM-dd HH:mm"}}},{header:"탈퇴일시",name:"wtdwDt",sortable:!0,width:120,align:"left",disabled:!1,validation:{dataType:"string",required:!0},editor:{type:"datePicker",options:{format:"yyyy-MM-dd HH:mm"}}},{header:"비밀번호갱신일시",name:"pwdRfsDt",sortable:!0,width:120,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:{type:"datePicker",options:{format:"yyyy-MM-dd HH:mm"}}},{header:"회원상태코드",name:"mbrStatCd",width:120,align:"left",sortable:!0,disabled:!1,validation:{dataType:"string",required:!1},formatter:"listItemText",editor:{type:"select",options:{listItems:r.codeList.MBR_STAT_CD}}},{header:"이메일",name:"email",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:"text"},{header:"결제인증키",name:"payCertKey",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!0},editor:"text"},{header:"간편가입코드",name:"simAdmsCd",width:120,align:"left",sortable:!0,disabled:!1,validation:{dataType:"string",required:!0},formatter:"listItemText",editor:{type:"select",options:{listItems:r.codeList.SIM_ADMS_CD}}},{header:"잠금여부",name:"lckYn",width:120,align:"left",sortable:!0,defaultValue:"Y",disabled:!1,validation:{dataType:"string",required:!1},formatter:"listItemText",editor:{type:"select",options:{listItems:r.codeList.YN_CD}}},{header:"실패횟수",name:"flCnt",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!1},editor:"text"},{header:"비고",name:"note",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!0},editor:"text"},{header:"연동참조",name:"linkRef",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!0},editor:"text"},{header:"수정ID",name:"modId",align:"left",sortable:!0,width:110,disabled:!0},{header:"수정일시",name:"modDt",align:"left",sortable:!0,width:120,disabled:!0},{header:"등록ID",name:"regId",align:"left",sortable:!0,width:110,disabled:!0},{header:"등록일시",name:"regDt",align:"left",sortable:!0,width:120,disabled:!0}],scrollX:!0,scrollY:!0,minBodyHeight:200,bodyHeight:468,columnOptions:{resizable:!0},minRowHeight:40,rowHeight:40,header:{height:40}}),o.grid.on("click",function(i){i.columnName==="cd"&&console.log("click")}),m()}),(i,t)=>(g(),y("div",E,[e("form",{class:"search",onSubmit:L(m,["prevent"]),onKeyup:Y(m,["enter"])},[e("fieldset",null,[P,e("table",null,[z,e("tbody",null,[e("tr",null,[F,e("td",J,[n(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>d.keyword=a)},null,512),[[u,d.keyword]])])]),q(r).userInfo.cmpId=="kaisa"?(g(),y("tr",O,[W,e("td",X,[n(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=a=>d.cmpId=a)},null,512),[[u,d.cmpId]])])])):S("",!0)]),n(e("tbody",$,[e("tr",null,[j,e("td",Q,[w(K,{name:["startModDt","endModDt"],format:"YYYY-MM-DD",date:[d.startModDt,d.endModDt],onSetStartDate:t[2]||(t[2]=a=>{d.startModDt=a.date}),onSetEndDate:t[3]||(t[3]=a=>{d.endModDt=a.date})},null,8,["date"])])]),e("tr",null,[Z,e("td",ee,[w(B,{name:["regDt"],format:"YYYY-MM-DD",date:[d.regDt],onSetStartDate:t[4]||(t[4]=a=>{d.regDt=a.date})},null,8,["date"])])]),e("tr",null,[te,e("td",null,[n(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=a=>d.modId=a)},null,512),[[u,d.modId]])]),ae,e("td",null,[n(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=a=>d.regId=a)},null,512),[[u,d.regId]])])])],512),[[k,o.audit]])])]),e("div",de,[e("span",{class:"crud"},[e("button",{type:"button",class:"button add",onClick:v},[ie,c("추가")]),e("button",{type:"button",class:"button save",onClick:I},[re,c("저장")]),e("button",{type:"button",class:"button del",onClick:M},[oe,c("삭제")])]),e("button",{type:"button",class:"audit",onClick:t[7]||(t[7]=a=>o.audit=!o.audit)},"상세조회"),se,e("button",{type:"reset",onClick:D},ne),e("div",ue,"총 "+R(o.totalCount)+"건",1)])],40,G),me]))}});const we=V(ce,[["__scopeId","data-v-55a227db"]]);export{we as default};

import{d as x,b as T,r as f,x as q,o as b,e as g,f as e,w as u,v as c,J as C,B as S,K as M,l as y,h,H as O,i as k,L as Y,p as N,j as L,_ as R}from"./index-b96c7cd4.js";import{G as V,S as K,a as P}from"./SelectGroupDate-2b14e51a.js";import{j as l}from"./jsonApi-4e63100b.js";import"./index-3df2611e.js";import"./util.date-6e182eaa.js";class A{async getOrderList(d){return(await l("/bo/or/getOrderList",d||{})).data}async getOrder(d){return(await l("/bo/or/getOrder",d||{})).data}async setOrderList(d){return(await l("/bo/or/setOrderList",d||{})).data}async insertOrder(d){return(await l("/bo/or/insertOrder",d||{})).data}async updateOrder(d){return(await l("/bo/or/updateOrder",d||{})).data}async deleteOrder(d){return(await l("/bo/or/getOrderList",d||{})).data}}const _=new A,s=n=>(N("data-v-8b66ed32"),n=n(),L(),n),B={id:"order"},H=["onSubmit","onKeyup"],U=s(()=>e("legend",null,"검색",-1)),E=s(()=>e("colgroup",null,[e("col",{width:"80"}),e("col",{width:"30%"}),e("col",{width:"80"}),e("col",{width:"*"})],-1)),G=s(()=>e("th",null,"검색조건",-1)),z={colspan:"3"},F={key:0},J=s(()=>e("th",null,"업체ID",-1)),W={colspan:"3"},X={class:"audit"},$=s(()=>e("th",null,"수정기간",-1)),Q={colspan:"3"},Z=s(()=>e("th",null,"등록일",-1)),j={colspan:"3"},ee=s(()=>e("th",null,"수정ID",-1)),te=s(()=>e("th",null,"등록ID",-1)),ae={class:"btnWrap"},de=s(()=>e("span",{class:"icon"},"",-1)),re=s(()=>e("span",{class:"icon"},"",-1)),ie=s(()=>e("span",{class:"icon"},"",-1)),oe=s(()=>e("button",{type:"submit",class:"button3"},[e("span",{class:"icon"},"")],-1)),se=s(()=>e("span",{class:"icon"},'"',-1)),le=[se],ne={class:"totalCount"},ue=s(()=>e("div",{id:"grid"},null,-1)),ce=x({__name:"Order",setup(n){const d=T(),r=f({keyword:"",startModDt:"",endModDt:"",regDt:"",regId:"",modId:"",cmpId:""}),o=f({grid:{},required:["prodNo","mbrNm","telNo","rsvDay","email","ordStatCd","price"],totalCount:0,list:[],audit:!1}),p=function(){_.getOrderList(r).then(i=>{o.totalCount=i.count?i.count:0,o.list=i.data,o.grid.resetData(i.data,{})},i=>{console.log(i)})},w=function(){o.grid.appendRow({},{at:0})},v=function(){let i=o.grid.getFocusedCell();if(i.rowKey==null||i.rowKey==null){alert("행을 먼저 선택해주세요.");return}confirm("선택한 행을 정말 삭제하시겠습니까?")&&o.grid.removeRow(i.rowKey)},D=function(){location.reload()},m=function(i){for(let t in i)for(let a of o.required)if(t==a&&!i[t])return alert(t+" 필수값이 없습니다."),!1;return!0},I=function(){o.grid.blur();let i=[],t=[0,0,0];for(let a of o.grid.getModifiedRows().createdRows){if(a.crud="C",!m(a))return;i.push(a),t[0]++}for(let a of o.grid.getModifiedRows().updatedRows){if(a.crud="U",!m(a))return;i.push(a),t[1]++}for(let a of o.grid.getModifiedRows().deletedRows)a.crud="D",i.push(a),t[2]++;if(t[0]==0&&t[1]==0&&t[2]==0){alert("변경사항이 없습니다.");return}confirm("등록 "+t[0]+"건, 수정 "+t[1]+"건, 삭제 "+t[2]+"건을 정말 저장하시겠습니까?")&&_.setOrderList(i).then(a=>{location.reload()},a=>{console.log(a)})};return q(()=>{o.grid=new V({el:document.getElementById("grid"),columns:[{header:"주문번호",name:"ordNo",sortable:!0,width:100,align:"right",disabled:!0,validation:{dataType:"number",required:!1},editor:"text"},{header:"상품번호",name:"prodNo",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!1},editor:"text"},{header:"업체ID",name:"cmpId",sortable:!0,width:100,align:"left",disabled:d.userInfo.cmpId!="kaisa",editor:"text"},{header:"회원ID",name:"mbrId",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!0},editor:"text"},{header:"회원명",name:"mbrNm",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:"text"},{header:"전화번호",name:"telNo",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:"text"},{header:"예약일",name:"rsvDay",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:{type:"datePicker",options:{format:"yyyy-MM-dd"}}},{header:"이메일",name:"email",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:"text"},{header:"주문상태코드",name:"ordStatCd",width:120,align:"left",sortable:!0,disabled:!1,validation:{dataType:"string",required:!1},formatter:"listItemText",editor:{type:"select",options:{listItems:d.codeList.ORD_STAT_CD}}},{header:"요금",name:"price",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!1},editor:"text"},{header:"추가요금",name:"addPrice",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!0},editor:"text"},{header:"사용포인트",name:"usePnt",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!0},editor:"text"},{header:"쿠폰번호",name:"cpnNo",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!0},editor:"text"},{header:"할인요금",name:"dcPrice",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!0},editor:"text"},{header:"인원수",name:"psnelCnt",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!0},editor:"text"},{header:"추가인원수",name:"addPsnelCnt",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!0},editor:"text"},{header:"온수추가여부",name:"wwtAddYn",width:120,align:"left",sortable:!0,defaultValue:"Y",disabled:!1,validation:{dataType:"string",required:!0},formatter:"listItemText",editor:{type:"select",options:{listItems:d.codeList.YN_CD}}},{header:"바베큐추가여부",name:"bbqAddYn",width:120,align:"left",sortable:!0,defaultValue:"Y",disabled:!1,validation:{dataType:"string",required:!0},formatter:"listItemText",editor:{type:"select",options:{listItems:d.codeList.YN_CD}}},{header:"픽업여부",name:"pickupYn",width:120,align:"left",sortable:!0,defaultValue:"Y",disabled:!1,validation:{dataType:"string",required:!0},formatter:"listItemText",editor:{type:"select",options:{listItems:d.codeList.YN_CD}}},{header:"예약경로코드",name:"rsvPathCd",width:120,align:"left",sortable:!0,disabled:!1,validation:{dataType:"string",required:!0},formatter:"listItemText",editor:{type:"select",options:{listItems:d.codeList.RSV_PATH_CD}}},{header:"비고",name:"note",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!0},editor:"text"},{header:"연동참조",name:"linkRef",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!0},editor:"text"},{header:"수정ID",name:"modId",align:"left",sortable:!0,width:110,disabled:!0},{header:"수정일시",name:"modDt",align:"left",sortable:!0,width:120,disabled:!0},{header:"등록ID",name:"regId",align:"left",sortable:!0,width:110,disabled:!0},{header:"등록일시",name:"regDt",align:"left",sortable:!0,width:120,disabled:!0}],scrollX:!0,scrollY:!0,minBodyHeight:200,bodyHeight:468,columnOptions:{resizable:!0},minRowHeight:40,rowHeight:40,header:{height:40}}),o.grid.on("click",function(i){i.columnName==="cd"&&console.log("click")}),p()}),(i,t)=>(b(),g("div",B,[e("form",{class:"search",onSubmit:k(p,["prevent"]),onKeyup:Y(p,["enter"])},[e("fieldset",null,[U,e("table",null,[E,e("tbody",null,[e("tr",null,[G,e("td",z,[u(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>r.keyword=a)},null,512),[[c,r.keyword]])])]),C(d).userInfo.cmpId=="kaisa"?(b(),g("tr",F,[J,e("td",W,[u(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=a=>r.cmpId=a)},null,512),[[c,r.cmpId]])])])):S("",!0)]),u(e("tbody",X,[e("tr",null,[$,e("td",Q,[y(K,{name:["startModDt","endModDt"],format:"YYYY-MM-DD",date:[r.startModDt,r.endModDt],onSetStartDate:t[2]||(t[2]=a=>{r.startModDt=a.date}),onSetEndDate:t[3]||(t[3]=a=>{r.endModDt=a.date})},null,8,["date"])])]),e("tr",null,[Z,e("td",j,[y(P,{name:["regDt"],format:"YYYY-MM-DD",date:[r.regDt],onSetStartDate:t[4]||(t[4]=a=>{r.regDt=a.date})},null,8,["date"])])]),e("tr",null,[ee,e("td",null,[u(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=a=>r.modId=a)},null,512),[[c,r.modId]])]),te,e("td",null,[u(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=a=>r.regId=a)},null,512),[[c,r.regId]])])])],512),[[M,o.audit]])])]),e("div",ae,[e("span",{class:"crud"},[e("button",{type:"button",class:"button add",onClick:w},[de,h("추가")]),e("button",{type:"button",class:"button save",onClick:I},[re,h("저장")]),e("button",{type:"button",class:"button del",onClick:v},[ie,h("삭제")])]),e("button",{type:"button",class:"audit",onClick:t[7]||(t[7]=a=>o.audit=!o.audit)},"상세조회"),oe,e("button",{type:"reset",onClick:D},le),e("div",ne,"총 "+O(o.totalCount)+"건",1)])],40,H),ue]))}});const ge=R(ce,[["__scopeId","data-v-8b66ed32"]]);export{ge as default};
